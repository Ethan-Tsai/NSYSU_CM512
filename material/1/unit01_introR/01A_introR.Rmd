---
title: UNIT01Aï¼šNotes for DataCamp:Introduction to R
author: Tony Chuo, NSYSU
date: "`r Sys.time()`"
output: 
  html_document: 
    css: ../etc/style.css
    highlight: pygments
    theme: spacelab
    toc: true
    toc_float: 
        collapsed: true
        smooth_scroll: true
editor_options: 
  chunk_output_type: inline
---

```{r echo=F, results='hide', message=FALSE, warning=FALSE}
# Installation, setup & formatting. Do not modify this code chunk.  
rm(list=ls(all=T))
knitr::opts_chunk$set(comment = NA)
knitr::opts_chunk$set(paged.print=FALSE)
knitr::opts_knit$set(global.par = TRUE)
par(cex=0.8); options(scipen=20, digits=4, width=90)
if(!require(pacman)) install.packages("pacman")
if(!require(dplyr)) install.packages("dplyr")
if(!require(tidyr)) install.packages("tidyr")
if(!require(ggplot2)) install.packages("ggplot2")
options(scipen=20, digits=4, width=80, tibble.print_min=4)
rmarkdown::find_pandoc(version = '2.7.3')
```


<br><hr>

### 1. Intro to Basics 
Take your first steps with R. In this chapter, you will learn how to use the console as a calculator and how to assign variables. You will also get to know the basic data types in R. Let's get started.

##### How it works
In the editor on the right there is already some sample code. Can you see which lines are actual R code and which are comments?
```{r}
# Calculate 3 + 4
3+4
```

```{r}
# Calculate 6 + 12
6+12
```

ğŸŒ» è¼¸å…¥<z>é‹ç®—å¼(expression)</z>ï¼ŒRæœƒè¼¸å‡ºé‹ç®—çš„çµæœ

##### Arithmetic with R
```{r}
# An addition
5 + 5 

# A subtraction
5 - 5 

# A multiplication
3 * 5

 # A division
(5 + 5) / 2 
```

é™¤äº†å››å‰‡é‹ç®—å’Œæ‹¬è™Ÿï¼ŒRé‚„æœ‰ä¸€äº›å¸¸ç”¨çš„é‹ç®—ç¬¦è™Ÿ<br> 
```{r}
# Exponentiation: Type 2^5 in the editor to calculate 2 to the power 5.
2^5

# Modulo: Type 28 %% 6 to calculate 28 modulo 6.
28%%6
```

ğŸŒ» [Quick-R](https://www.statmethods.net/management/operators.html)æœ‰å¾ˆå¤šå°åˆå­¸è€…æœ‰ç”¨çš„è³‡è¨Š 

##### Variable assignment
æˆ‘å€‘å¯ä»¥ç”¨ `<-` æˆ– `=`,æŠŠé‹ç®—çš„çµæœå„²å­˜åˆ°ä¸€å€‹ã€Œ<z>è³‡æ–™ç‰©ä»¶(data object, variable)</z>ã€è£¡é¢
```{r}
# Assign the value 42 to x
x <- 42
```

```{r}
# Print out the value of the variable x
x
```

##### Variable assignment (2)
```{r}
# Assign the value 5 to the variable my_apples
my_apples=5
```

```{r}
# Print out the value of the variable my_apples
my_apples
```

##### Variable assignment (3)
```{r}
# Assign a value to the variables my_apples and my_oranges
my_apples <- 5

# Assign to my_oranges the value 6.
my_oranges <- 6

# Add these two variables together
my_apples + my_oranges

# Create the variable my_fruit
my_fruit = my_apples + my_oranges
```

æˆ‘å€‘å¯ä»¥åœ¨é‹ç®—å¼è£¡é¢ä½¿ç”¨è³‡æ–™ç‰©ä»¶ï¼ŒæŠŠé‹ç®—çš„çµæœ<z>å„²å­˜</z>åˆ°å¦å¤–ä¸€å€‹è³‡æ–™ç‰©ä»¶è£¡é¢

##### Apples and oranges
Arithmetic operators allow objects of numeric datatypes but not `character`.
```{r}
# Assign a value to the variable my_apples
my_apples <- 5 

# Fix the assignment of my_oranges, so that it can be added with `my_apples`
# my_oranges <- "six"
my_oranges <- 6

# Create the variable my_fruit and print it out
my_fruit <- my_apples + my_oranges 
my_fruit
```

##### Basic datatypes in R
```{r}
# Change my_numeric to be 42
my_numeric <- 42

# Change my_character to be "universe"
my_character <- "universe"

# Change my_logical to be FALSE
my_logical <- FALSE
```

ğŸŒ» å¸¸ç”¨çš„R<z>è³‡æ–™ç¨®é¡(types)</z>ï¼š

+ æ•´æ•¸(integer)ã€å¯¦æ•¸(numeric)
+ æ–‡å­—ã€å­—ä¸²(character)
+ é¡åˆ¥(factor) 
+ é‚è¼¯(logical/boolean)
+ æ—¥æœŸ(`Date`)ã€æ™‚é–“(`POXIXct`,...)

<br>

##### What's that data type?
```{r}
# Declare variables of different types
my_numeric <- 42
my_character <- "universe"
my_logical <- FALSE 

# Check class of my_numeric
class(my_numeric)

# Check class of my_character
class(my_character)

# Check class of my_logical
class(my_logical)

```

<br><hr>

### 2. Vectors å‘é‡
<z>å‘é‡(vector)</z>æ˜¯å“ªè£¡é¢æœ€åŸºæœ¬çš„è³‡æ–™çµæ§‹ï¼Œä¸€å€‹å‘é‡ç‰©ä»¶å°±æ˜¯ä¸€å€‹ç³»åˆ—åŒä¸€ç¨®è³‡æ–™ç¨®é¡(data type)çš„å€¼ã€‚

We take you on a trip to Vegas, where you will learn how to analyze your gambling results using vectors in R. After completing this chapter, you will be able to create vectors in R, name them, select elements from them, and compare different vectors.

##### Create a vector
```{r}
# Assign the value "Go!" to the variable `vegas`. Remember: R is case sensitive!
vegas <- "Go!"
```

##### Create a vector (2)
In R, you create a vector with the combine function c(). You place the vector elements separated by a comma between the parentheses. For example: <br>
In R, you create a vector with the combine function c(). You place the vector elements separated by a comma between the parentheses. For example:
```{r}
numeric_vector <- c(1, 10, 49)
character_vector <- c("a", "b", "c")
```

ğŸŒ» Use the `c()` function to create vector. <br>   
ğŸŒ» All elements in c() must be the same datatype.

æˆ‘å€‘å¯ä»¥ç”¨`c()`é€™ä¸€å€‹<z>åŠŸèƒ½(function)</z>,å°‡<z>åŒä¸€ç¨®é¡</z>çš„è³‡æ–™çµåˆæˆä¸€å€‹<z>å‘é‡</z><br>
ç„¶å¾Œç”¨`<-`æˆ–`=`ç‚ºé€™å€‹<z>å‘é‡ç‰©ä»¶</z>å–ä¸€å€‹åç¨±
```{r}
vector1 <- c(1.2, 3.5, 15.2)            # `vector1`æ˜¯ä¸€å€‹æ•¸å€¼å‘é‡
vector2 = c("Alice", "Bob", "Cindy")    # `vector2`æ˜¯ä¸€å€‹æ–‡å­—å‘é‡
```

```{r}
# Complete the code for `boolean_vector` contains the three elements: `TRUE`, `FALSE` and `TRUE` (in that order).
boolean_vector <- c(TRUE, FALSE, TRUE)
```

##### Create a vector (3)
```{r}
# Poker winnings from Monday to Friday
# å¾æ˜ŸæœŸä¸€åˆ°æ˜ŸæœŸäº”ç©æ’²å…‹è´æˆ–è¼¸çš„éŒ¢
poker_vector <- c(140, -50, 20, -120, 240)
```

```{r}
# Roulette winnings: Monday lost $24, Tuesday lost $50, 
# Wednesday won $100, Thursday lost $350, and Friday won $10.
# å¾æ˜ŸæœŸä¸€åˆ°æ˜ŸæœŸäº”ç©è¼ªç›¤è´æˆ–è¼¸çš„éŒ¢
roulette_vector <- c(-24,-50,100,-350,10)
```

##### Naming vector elements å‘é‡å…ƒä»¶çš„åç¨± 
ä¸åªæ˜¯ç‰©ä»¶å¯ä»¥æœ‰<z>åç¨±(name</z>)ï¼Œç‰©ä»¶ä¸­çš„æ¯ä¸€å€‹å…ƒä»¶(å­ç‰©ä»¶)ä¹Ÿå¯ä»¥æœ‰ä¸€å€‹åç¨±<br>
```{r}
poker_vector
```

`names()`å¯ä»¥ç”¨ä¾†æŒ‡å®šç‰©ä»¶(`poker_vector`)ä¸­çš„æ¯ä¸€å€‹å­ç‰©ä»¶çš„åå­—
```{r}
# Assign days as names of poker_vector
names(poker_vector) <- c("Monday", "Tuesday", "Wednesday", "Thursday", "Friday")
poker_vector
```

ğŸŒ» å¦‚ä¸Šæ‰€ç¤ºï¼Œåç¨±å¯ä»¥è®“ç‰©ä»¶(å’Œå­ç‰©ä»¶)éƒ½è®Šå¾—æ›´å®¹æ˜“è§£è®€ã€‚

```{r}
# Assign days as names of roulette_vector
names(roulette_vector) = c("Monday", "Tuesday", "Wednesday", "Thursday", "Friday")
roulette_vector
```

##### Naming a vector (2)
```{r}
# Poker winnings from Monday to Friday
poker_vector <- c(140, -50, 20, -120, 240)

# Roulette winnings from Monday to Friday
roulette_vector <- c(-24, -50, 100, -350, 10)

# The variable days_vector
# å¦‚æœæˆ‘å€‘èˆ‡å…ˆæŠŠé€±ä¸€åˆ°é€±äº”çš„æ–‡å­—é å…ˆå­˜æ”¾åœ¨`days_vector`è£¡é¢
days_vector <- c("Monday", "Tuesday", "Wednesday", "Thursday", "Friday")
```

```{r}
# Assign the names of the day to roulette_vector and poker_vector
# ç¨‹å¼å¯«èµ·ä¾†å°±æœƒæ¯”è¼ƒç°¡æ·
names(poker_vector) <- days_vector  
names(roulette_vector) <- days_vector
```

##### Calculating total winnings å‘é‡çš„æ•¸å­¸é‹ç®—
```{r}
A_vector <- c(1, 2, 3)
B_vector <- c(4, 5, 6)

# Take the sum of A_vector and B_vector
total_vector <- A_vector + B_vector
  
# Print out total_vector
total_vector
```

##### Calculating total winnings (2)
```{r}
# Assign to total_daily how much you won/lost on each day
total_daily <- poker_vector + roulette_vector
total_daily
```

##### Calculating total winnings (3)
Rç”¨`function_name()`ä¾†è¡¨ç¤º<z>åŠŸèƒ½å‘¼å«</z>ï¼Œå¦‚`sum(vector1)`æœƒå›å‚³`vector1`ä¹‹ä¸­æ‰€æœ‰æ•¸å€¼çš„ç¸½å’Œï¼Œå¸¸ç”¨çš„Rå…§å»ºåŠŸèƒ½è«‹åƒè€ƒï¼š[Built-in Functions](https://www.statmethods.net/management/functions.html)
```{r}
# Total winnings with poker ç©æ’²å…‹ç¸½å…±è´äº†å¤šå°‘éŒ¢å‘¢?
total_poker <- sum(poker_vector)

# Total winnings with roulette ç©è¼ªç›¤ç¸½å…±è´äº†å¤šå°‘éŒ¢å‘¢?  
total_roulette <-  sum(roulette_vector)

# Total winnings overall é€™ä¸€å‘¨çš„ç¸½è¼¸è´æ˜¯?  
total_week <- total_poker + total_roulette

# Print out total_week
total_week
```

##### Comparing total winnings
```{r}
# Calculate total gains for poker and roulette
total_poker <- sum(poker_vector)
total_roulette <-  sum(roulette_vector)

# Check if you realized higher total gains in poker than in roulette
total_poker > total_roulette
```

ğŸŒ» <z>Comparison Operators</z> æ¯”è¼ƒé‹ç®—ç¬¦è™Ÿ

+ `<` for less than
+ `>` for greater than
+ `<=` for less than or equal to
+ `>=` for greater than or equal to
+ `==` for equal to each other 
+ `!=` not equal to each other

ğŸŒ» æ¯”è¼ƒé‹ç®—å¼(Comparison Expression)é‹ç®—çš„çµæœæœƒæ˜¯é‚è¼¯å€¼ï¼š`TRUE`æˆ–`FALSE`

<br>

ğŸŒ· <z>ç´¢å¼•(index)</z>å¯ä»¥å–å‡ºç‰©ä»¶ä¹‹ä¸­çš„æŸäº›å­ç‰©ä»¶ï¼ŒRç”¨`[]`ä¾†ä½œç´¢å¼• 


ğŸŒ· Rçš„ç´¢å¼•æ–¹å¼éå¸¸éˆæ´»ï¼Œä¸€å…±æœ‰ä¸‰ç¨®ç´¢å¼•æ–¹å¼ï¼š

+ <z>ä½ç½®ç´¢å¼•</z>ï¼š[æ•´æ•¸å‘é‡]å¦‚ï¼š[c(3,5,10)], [2]  
+ <z>åç¨±ç´¢å¼•</z>ï¼š[æ–‡å­—å‘é‡]å¦‚ï¼š[c("Monday","Friday")]
+ <z>æ¢ä»¶ç´¢å¼•</z>ï¼š[é‚è¼¯å‘é‡]å¦‚ï¼š[poker_vector > 0]

<br>

##### Vector selection: the good times ä½ç½®(æ•´æ•¸)ç´¢å¼•
```{r}
# Assign the poker results of Wednesday to the variable poker_wednesday. Using index notation `[]`
poker_wednesday <- poker_vector[3]
```

##### Vector selection: the good times (2) ä½ç½®(æ•´æ•¸)ç´¢å¼•
```{r}
# Assign the poker results of Tuesday, Wednesday and Thursday to the variable poker_midweek, using `[c(2,3,4)]`
poker_midweek <- poker_vector[c(2,3,4)]
```

##### Vector selection: the good times (3) ä½ç½®(æ•´æ•¸)ç´¢å¼•
<z>é€£çºŒçš„æ•´æ•¸å‘é‡</z>å¯ä»¥å¯«æˆ`a:b`é€™ç¨®å½¢å¼ï¼Œä¾‹å¦‚`2:6`ä»£è¡¨`c(2,3,4,5,6)`
```{r}
# Poker and roulette winnings from Monday to Friday:
# Assign to roulette_selection_vector the roulette results from Tuesday up to Friday; make use of `[2:5]`
roulette_selection_vector <- roulette_vector[2:5]
```

##### Vector selection: the good times (4) åç¨±(æ–‡å­—)ç´¢å¼•
```{r}
# Poker and roulette winnings from Monday to Friday:
# Select poker results by names `[c("Monday", "Tuesday", "Wednesday")]`
poker_start <- poker_vector[c("Monday", "Tuesday", "Wednesday")]
poker_start
```

`mean()`è¨ˆç®—æ•¸å€¼å‘é‡ä¹‹ä¸­æ‰€æœ‰æ•¸å€¼çš„å¹³å‡å€¼
```{r}
# Calculate the average of the elements in poker_start by `mean()`
mean(poker_start)
```

##### Selection by comparison - Step 1 
ğŸŒ· <z>æ¢ä»¶ç´¢å¼•</z>æ˜¯æœ€å¸¸ç”¨çš„ç´¢å¼•
```{r}
# Poker and roulette winnings from Monday to Friday:
poker_vector <- c(140, -50, 20, -120, 240)
roulette_vector <- c(-24, -50, 100, -350, 10)
days_vector <- c("Monday", "Tuesday", "Wednesday", "Thursday", "Friday")
names(poker_vector) <- days_vector
names(roulette_vector) <- days_vector

# Which days did you make money on poker?
selection_vector <- poker_vector > 0
  
# Print out selection_vector
selection_vector  
```
ğŸŒ» Comparison Operators

+ `<` for less than
+ `>` for greater than
+ `<=` for less than or equal to
+ `>=` for greater than or equal to
+ `==` for equal to each other 
+ `!=` not equal to each other

##### Selection by comparison - Step 2
```{r}
# Select from poker_vector these days using the indexing vector `[selection_vector]`
poker_winning_days <- poker_vector[selection_vector]
poker_winning_days 
```

##### Advanced selection
```{r}
# Poker and roulette winnings from Monday to Friday:
poker_vector <- c(140, -50, 20, -120, 240)
roulette_vector <- c(-24, -50, 100, -350, 10)
days_vector <- c("Monday", "Tuesday", "Wednesday", "Thursday", "Friday")
names(poker_vector) <- days_vector
names(roulette_vector) <- days_vector

# Which days did you make money on roulette?
selection_vector <- roulette_vector > 0

# Select from roulette_vector these days
roulette_winning_days <- roulette_vector[selection_vector]
roulette_winning_days
```

<br><hr>

### 3. Matrices çŸ©é™£
<z>çŸ©é™£(maatrix)</z>èˆ‡å‘é‡ä¸€æ¨£ï¼Œä¸€å€‹çŸ©é™£ç‰©ä»¶è£¡é¢æ‰€æœ‰çš„å­ç‰©ä»¶éƒ½å¿…é ˆè¦æœ‰åŒæ¨£çš„è³‡æ–™é¡åˆ¥(data type)ï¼Œä¸éçŸ©é™£æ˜¯ä¸€ç¨®äºŒç¶­çš„è³‡æ–™çµæ§‹ï¼Œå‘é‡çš„å­å…ƒä»¶æ˜¯ä¸€ç¶­çš„æ’åˆ—ï¼Œè€ŒçŸ©é™£çš„å­å…ƒä»¶æ˜¯äºŒç¶­çš„æ’åˆ—ã€‚åœ¨é€™å€‹ç« ç¯€è£¡é¢ï¼Œ æˆ‘å€‘å…ˆç·´ç¿’åœ¨Rèªè¨€è£¡é¢å¦‚ä½•å®šç¾©å’Œä½¿ç”¨çŸ©é™£ã€‚ 

A matrix is two dimensional data object of a collection of elements of the same data type (numeric, character, or logical) arranged into a fixed number of rows and columns. 

You can construct a matrix in R with the matrix() function. Consider the following example: `matrix(1:9, byrow = TRUE, nrow = 3)`

##### What's a matrix?
`matrix()`å¯ä»¥å°‡ä¸€ç¶­çš„å‘é‡å‚³è®ŠæˆäºŒç¶­çš„<z>çŸ©é™£</z>
```{r}
# Construct a matrix with 3 rows containing the numbers 1 up to 9, filled row-wise.
matrix(1:9, byrow=T, nrow=3)
```

##### Analyze matrices, you shall 
è£½ä½œæ˜Ÿéš›å¤§æˆ°å‰ä¸‰éƒ¨é›»å½±çš„ç¥¨æˆ¿çŸ©é™£
```{r}
# Box office Star Wars (in millions!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Create box_office
# Concatenate the 3 vectors `c(new_hope, empire_strikes, return_jedi)` 
# Then create a matrix by `matrix()`. Remember to specify `byrow` and `nrow`
box_office <- c(new_hope,empire_strikes,return_jedi)
box_office
```

```{r}
# Construct star_wars_matrix
star_wars_matrix <- matrix(box_office, byrow=T, nrow=3)
  
# print out the matrix
star_wars_matrix
```

##### Naming a matrix
çŸ©é™£æ¯ä¸€è¡Œ(column)å’Œæ¯ä¸€åˆ—(row)éƒ½å¯ä»¥æœ‰åç¨±
```{r}
# Box office Star Wars (in millions!)
new_hope <- c(460.998, 314.4)
empire_strikes <- c(290.475, 247.900)
return_jedi <- c(309.306, 165.8)

# Construct matrix
star_wars_matrix <- matrix(c(new_hope, empire_strikes, return_jedi), nrow = 3, byrow = TRUE)

# Vectors region and titles, used for naming
region <- c("US", "non-US")
titles <- c("A New Hope", "The Empire Strikes Back", "Return of the Jedi")
```


```{r}
# Name the columns with region with `colnames()`
colnames(star_wars_matrix) = region

# Name the rows with titles  with `rownames()`
rownames(star_wars_matrix) = titles

# Print out star_wars_matrix
star_wars_matrix
```

##### Calculating the worldwide box office
ä½¿ç”¨`rowSums()`é€™å€‹åŠŸèƒ½ä¾†è¨ˆç®—æ˜Ÿéš›å¤§æˆ°å‰ä¸‰éƒ¨é›»å½±çš„å…¨çƒç¥¨æˆ¿
```{r}
# Calculate worldwide box office figures for each movies with `rowSums()`
worldwide_vector <- rowSums(star_wars_matrix) 

worldwide_vector
```

##### Adding a column for the Worldwide box office
`cbind()`åœ¨columnçš„æ–¹å‘åˆä½µçŸ©é™£ï¼Œç”¨é€™å€‹åŠŸèƒ½å°‡å…¨çƒç¥¨æˆ¿å‘é‡`worldwide_vector`ä½µå…¥`all_wars_matrix`ç¥¨æˆ¿çŸ©é™£
```{r}
# Construct worldwide box office vector
# Bind the new variable worldwide_vector as a column to star_wars_matrix with `cbind()`
all_wars_matrix <-cbind(star_wars_matrix,worldwide_vector)  

all_wars_matrix
```

##### Adding rows
`rbind()`åœ¨rowçš„æ–¹å‘åˆä½µçŸ©é™£ï¼Œæˆ‘å€‘å…ˆè£½ä½œæ˜Ÿæˆ°ç³»åˆ—å¾Œä¸‰éƒ¨é›»å½±çš„ç¥¨æˆ¿çŸ©é™£(`star_wars_matrix2`)
```{r}
star_wars_matrix2 = matrix(
  c(474.5,  552.5, 310.7,  338.7, 380.3,  468.5),
  byrow=T, nrow=3)
rownames(star_wars_matrix2) = c(
  "The Phantom Menace","Attack of the Clones",
  "Revenge of the Sith") 
colnames(star_wars_matrix2)=c("US", "non-US")

star_wars_matrix2
```

ç„¶å¾Œç”¨`rbind()`å°‡å®ƒä½µå…¥`all_wars_matrix`
```{r}
# Combine both Star Wars trilogies in one matrix with `rbind()`
all_wars_matrix <- rbind(star_wars_matrix, star_wars_matrix2) 
  
all_wars_matrix  
```

##### The total box office revenue for the entire saga
ç”¨`colSums`è¨ˆç®—æ˜Ÿæˆ°ç³»åˆ—çš„`US`å’Œ`non-US`çš„ç¥¨æˆ¿ç¸½åˆ
```{r}
# Total revenue for US and non-US with `colSums()`
total_revenue_vector <- colSums(all_wars_matrix)
  
# Print out total_revenue_vector
total_revenue_vector  
```

##### Selection of matrix elements <z>çŸ©é™£çš„ç´¢å¼•</z>
äºŒç¶­ç‰©ä»¶çš„ç´¢å¼•éœ€è¦ä»¥`[row_index,column_index]`çš„å½¢å¼æŒ‡å®šæƒ³è¦æŠ½å–çš„rowså’Œcolumns
```{r}
# Select the non-US revenue for all movies with index notation `[,2]`
non_us_all <- all_wars_matrix[,2]
  
# Average non-US revenue with `mean()` 
mean(non_us_all)
```
æ˜Ÿæˆ°ç³»åˆ—é›»å½±æµ·å¤–ç¥¨æˆ¿çš„å¹³å‡å€¼

```{r}
# Select the non-US revenue for first two movies with index notation `[1:2,2]`
non_us_some <- all_wars_matrix[1:2,2]
  
# Average non-US revenue for first two movies with `mean()`
mean(non_us_some)
```
æ˜Ÿæˆ°ç³»åˆ—å‰å…©éƒ¨é›»å½±æµ·å¤–ç¥¨æˆ¿çš„å¹³å‡å€¼

##### A little arithmetic with matrices
å‡è¨­æ‰€æœ‰é›»å½±åœ¨æ‰€æœ‰åœ°å€çš„ç¥¨åƒ¹éƒ½æ˜¯`$5`ï¼Œæˆ‘å€‘å¯ä»¥å¾ç¥¨æˆ¿çŸ©é™£æ¨ç®—å‡ºæ¯ä¸€éƒ¨é›»å½±çš„è§€çœ¾äººæ•¸
```{r}
# Estimate the visitors, assuming ticket price is $5
visitors <- all_wars_matrix/5
  
# Print the estimate to the console
visitors
```

##### A little arithmetic with matrices (2)
å‡è¨­æ¯éƒ¨é›»å½±åœ¨å„åœ°å€çš„ç¥¨åƒ¹ä¸ç›¸åŒï¼Œæˆ‘å€‘å°±è¦å…ˆè£½ä½œä¸€å€‹ç¥¨åƒ¹çŸ©é™£(`ticket_prices_matrix`)
```{r}
ticket_prices_matrix = matrix(
  c(5,5,6,6,7,7,4,4,4.5,4.5,4.9,4.9), byrow=T, nrow=6,
  dimnames=list(
    rownames(all_wars_matrix),
    colnames(all_wars_matrix))
  ); ticket_prices_matrix
```

å†æ¨ç®—å‡ºæ¯ä¸€éƒ¨é›»å½±åœ¨ä¸åŒåœ°å€çš„è§€çœ¾äººæ•¸
```{r}
# Estimated number of visitors 
visitors <- all_wars_matrix / ticket_prices_matrix
visitors
```

æ˜Ÿæˆ°ç³»åˆ—å„éƒ¨é›»å½±ç¾åœ‹è§€çœ¾äººæ•¸çš„å¹³å‡å€¼æ˜¯å¤šå°‘äººå‘¢ï¼Ÿ
```{r}
# US visitors 
us_visitors <- visitors[,1] 

# Average number of US visitors
mean(us_visitors)
```


<br><hr>

### 4. Factors é¡åˆ¥(å› ç´ )
æŸä¸€äº›è³‡æ–™ï¼Œåƒæ˜¯é¡§å®¢çš„æ€§åˆ¥("ç”·æ€§","å¥³æ€§")ï¼Œäº¤é€šå·¥å…·("æ±½è»Š","ç«è»Š","é£›æ©Ÿ")ç­‰ï¼Œé›–ç„¶èªªé€™äº›è³‡æ–™éƒ½æ˜¯æ–‡å­—çš„æ–¹å¼å‘ˆç¾ï¼Œä½†å®ƒå€‘å®ƒå€‘çš„å…§å®¹åªé™å®šæ–¼æŸä¸€äº›å›ºå®šçš„é¡åˆ¥ï¼Œè€Œä¸æ˜¯ä»»æ„çš„æ–‡å­—å­—ä¸²ï¼Œåœ¨ç¨‹å¼èªè¨€è£¡é¢ï¼Œé€™ä¸€ç¨®è³‡æ–™ç‚ºåˆ¥æœƒè¢«ç¨±ç‚º"é¡åˆ¥(Factor)"è³‡æ–™ã€‚åœ¨é€™è£¡æˆ‘å€‘å…ˆä»‹ç´¹ä¸€ä¸‹è¼‰Rèªè¨€è£¡é¢å¦‚ä½•å®šç¾©ã€ä½¿ç”¨<z>é¡åˆ¥è³‡æ–™ç‰©ä»¶(Factor)</z>ï¼Œåœ¨å¾ŒçºŒçš„å–®å…ƒè£¡é¢ï¼Œæˆ‘åœ¨åšåˆ†é¡çµ±è¨ˆã€åˆ†é¡æ¯”è¼ƒæˆ–è€…äº¤å‰åˆ†ææ™‚ï¼Œé¡åˆ¥è³‡æ–™å°‡æœƒæ˜¯ä¸»è¦çš„åˆ†é¡åŸºç¤ã€‚

Data often falls into a limited number of categories. For example, human hair color can be categorized as black, brown, blond, red, grey, or whiteâ€”and perhaps a few more options for people who color their hair. In R, categorical data is stored in factors. Factors are very important in data analysis, so start learning how to create, subset, and compare them now.

##### What's a factor and why would you use it?
```{r}
# Assign to variable theory the value "factors"
theory = "factors"
```

##### What's a factor and why would you use it? (2)
```{r}
# create `sex vector`
sex_vector <- c("Male", "Female", "Female", "Male", "Male")
sex_vector
```
`sex_vector`æ˜¯ä¸€å€‹æ–‡å­—å‘é‡

<z>`factor()`é€™ä¸€å€‹åŠŸèƒ½å¯ä»¥æŠŠæ–‡å­—æˆ–è€…æ•¸å€¼ç‰©ä»¶è½‰æ›æˆé¡åˆ¥ç‰©ä»¶
```{r}
# Convert `sex_vector` to a factor
factor_sex_vector <- factor(sex_vector)

# Print out factor_sex_vector
factor_sex_vector
```
è½‰æ›ä¹‹å¾Œï¼Œ`factor_sex_vector`å°±æ˜¯ä¸€å€‹é¡åˆ¥å‘é‡ã€‚<br>

ğŸŒ» åˆ—å°é¡åˆ¥ç‰©ä»¶æ™‚ï¼Œåœ¨å‘é‡å€¼çš„ä¸‹æ–¹æœƒè¨»æ˜é€™å€‹é¡åˆ¥ç‰©ä»¶è£¡é¢æœ‰å“ªä¸€äº›é¡åˆ¥(`Levels:`)

<br>

##### What's a factor and why would you use it? (3)

ä¸€èˆ¬çš„é¡åˆ¥ç‰©ä»¶è£¡é¢ï¼Œå„é¡åˆ¥ä¹‹é–“ä¸¦æ²’æœ‰å¤§å°çš„å€åˆ¥ï¼Œé›–ç„¶èªªåˆ—å°çš„æ™‚å€™ï¼ŒRæœƒä¾å­—æ¯çš„é †åºåˆ—å‡ºå„å€‹é¡åˆ¥ï¼Œä½†æ˜¯é€™åˆ—å°é †åºä¸¦æ²’æœ‰å¤§å°çš„æ„æ¶µã€‚

```{r}
# Animals
animals_vector <- c("Elephant", "Giraffe", "Donkey", "Horse")
factor_animals_vector <- factor(animals_vector)
factor_animals_vector
```

å¦‚æœæˆ‘å€‘æƒ³è¦è®“é¡åˆ¥ä¹‹é–“æœ‰å¤§å°ï¼Œåœ¨å‘¼å«`factor()`æ™‚å°±éœ€è¦åŠ é€²å»`order=TRUE`é€™ä¸€å€‹åƒæ•¸é¸é …ã€‚
```{r}
# Temperature
temperature_vector <- c("High", "Low", "High","Low", "Medium")
factor_temperature_vector <- factor(
  temperature_vector, order = TRUE, 
  levels = c("Low", "Medium", "High"))
factor_temperature_vector
```

ğŸŒ» `Levels: Low < Medium < High`ä»£è¡¨ï¼š`High`æ¯”`Medium`å¤§ï¼Œ`Medium`æ¯”`Low`å¤§

<br>

##### Factor levels
```{r}
# Code to build factor_survey_vector
survey_vector <- c("M", "F", "F", "M", "M")
factor_survey_vector <- factor(survey_vector)
factor_survey_vector
```

`levels()`å¯ä»¥ç”¨ä¾†æ”¹è®Šé¡åˆ¥(`level`)çš„åç¨±
```{r}
# Specify the levels of factor_survey_vector
levels(factor_survey_vector) <- c("Female","Male")
factor_survey_vector
```

##### Summarizing a factor
Take a `summary()` of the `survey_vector` and `factor_survey_vector`. Interpret the results of both vectors. Are they both equally useful in this case?

å°é¡åˆ¥å‘é‡`factor_survey_vector`è€Œè¨€ï¼Œ`summary()`å¯ä»¥çµ±è¨ˆå„åˆ†é¡çš„æ¬¡æ•¸ï¼Œä½†å®ƒå°æ–‡å­—å‘é‡(`survey_vector`)æ˜¯æ²’æœ‰ç”¨çš„
```{r}
# Generate summary for survey_vector
summary(survey_vector)
```

```{r}
# Generate summary for factor_survey_vector
summary(factor_survey_vector)
```

##### Battle of the sexes
```{r}
# Build factor_survey_vector with clean levels
survey_vector <- c("M", "F", "F", "M", "M")
factor_survey_vector <- factor(survey_vector)
levels(factor_survey_vector) <- c("Female", "Male")

# Male
male <- factor_survey_vector[1]

# Female
female <- factor_survey_vector[2]

# Battle of the sexes: Male 'larger' than female?
male > female
```

ğŸŒ· å› ç‚ºåœ¨ç”¢ç”Ÿ`factor_survey_vector`æ™‚æˆ‘å€‘ä¸¦æ²’æœ‰æŒ‡å®š`order=TRUE`ï¼Œæ‰€ä»¥å®ƒçš„å„å­å…ƒä»¶ä¹‹é–“æ˜¯ä¸èƒ½æ¯”å¤§å°çš„ï¼

##### Ordered factors
Defind `speed_vector` as a **Character** vector with 5 entries, one for each analyst. Each entry should be either "slow", "medium", or "fast". Use the list below:

+ Analyst 1 is medium,
+ Analyst 2 is slow,
+ Analyst 3 is slow,
+ Analyst 4 is medium and
+ Analyst 5 is fast.

æˆ‘å€‘ç”¨`speed_vector`ä¾†è¨˜éŒ„äº”ä½åˆ†æå¸«çš„å·¥ä½œé€Ÿåº¦
```{r}
# Create speed_vector
speed_vector <- c("medium", "slow", "slow", "medium", "fast")
```

##### Ordered factors (2)
ç„¶å¾Œç”¨`factor(...,order=TRUE)å°‡å…¶è½‰è®Šç‚ºä¸€å€‹æœ‰åºçš„é¡åˆ¥å‘é‡(ordinal factor vector)
```{r}
# Convert speed_vector to ordered factor vector
factor_speed_vector <- factor(
  speed_vector,levels=c("slow","medium","fast"),ordered=TRUE)

# Print factor_speed_vector
factor_speed_vector
```

##### Comparing ordered factors
```{r}
# Factor value for second data analyst
da2 <- factor_speed_vector[2]
# Factor value for fifth data analyst
da5 <- factor_speed_vector[5]

# Is data analyst 2 faster than data analyst 5?
da2 > da5
```
ç„¶å¾Œæˆ‘å€‘å°±å¯ä»¥ç”¨æ¯”è¼ƒé‹ç®—ç¬¦è™Ÿ(`>`)åœ¨å®ƒçš„å­å…ƒç´ ä¹‹é–“åšå¤§å°æ¯”è¼ƒäº†ï¼


<br><hr>

### 5. Data Frame è³‡æ–™æ¡†
è·ŸçŸ©é™£ä¸€æ¨£<z>è³‡æ–™æ¡†(data frame)</z>ä¹Ÿæ˜¯ä¸€ç¨®äºŒç¶­çš„è³‡æ–™çµæ§‹ï¼Œä¸éçŸ©é™£ç‰©ä»¶è£¡å…¨éƒ¨çš„å­å…ƒä»¶å¿…é ˆè¦æœ‰åŒæ¨£çš„è³‡æ–™é¡åˆ¥(data type)ï¼Œè€Œè³‡æ–™æ¡†æ²’æœ‰é€™ä¸€å€‹é™åˆ¶ï¼Œå®ƒçš„è¡Œcolumnså¯ä»¥æœ‰ä¸ä¸€æ¨£çš„è³‡æ–™ç¨®é¡ï¼Œåœ¨å¾ŒçºŒçš„å–®å…ƒè£¡é¢æˆ‘å€‘æœƒçœ‹åˆ°è³‡æ–™æ¡†æ˜¯å•†æ¥­æ•¸æ“šåˆ†æè£¡é¢æœ€å¸¸è¦‹ã€æœ€é‡è¦çš„ä¸€ç¨®è³‡æ–™çµæ§‹ï¼Œåœ¨é€™å€‹ç« ç¯€æˆ‘å€‘å…ˆä»‹ç´¹ä¸€ä¸‹è¼‰Rèªè¨€è£¡é¢å¦‚ä½•å®šç¾©ã€ä½¿ç”¨è³‡æ–™æ¡†ã€‚

Data often falls into a limited number of categories. For example, human hair color can be categorized as black, brown, blond, red, grey, or whiteâ€”and perhaps a few more options for people who color their hair. In R, categorical data is stored in factors. Factors are very important in data analysis, so start learning how to create, subset, and compare them now.

##### What's a data frame?
Rè£¡é¢æœ‰ä¸€å€‹å…§å»ºçš„è³‡æ–™æ¡†`mtcars`ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œå®ƒè¨˜éŒ„äº†ä¸€äº›æ±½è»Šå‹è™Ÿçš„å„ç¨®å±¬æ€§
```{r,paged.print=FALSE}
data(mtcars)
mtcars
```
å„å±¬æ€§çš„å®šç¾©
```{r}
# ?mtcars
```


##### Quick, have a look at your dataset
çœ‹çœ‹é€™å€‹è³‡æ–™æ¡†çš„å‰é¢å¹¾ç­†è¨ˆéŒ„
```{r,paged.print=FALSE}
# Call head() on mtcars
head(mtcars)
```

ğŸŒ» å•†æ¥­æ•¸æ“šé€šå¸¸æœƒæ˜¯è¡¨æ ¼çš„å‹å¼ï¼Œé€šå¸¸æ¯å€‹rowä»£è¡¨ä¸€å€‹åˆ†æå°è±¡(è»Šå‹)ï¼Œæ¯å€‹column(`mpg`è€—æ²¹é‡,`cyl`æ±½ç¼¸æ•¸,...)ä»£è¡¨åˆ†æå°è±¡çš„æŸä¸€å€‹å±¬æ€§ã€‚

<br>

##### Have a look at the structure

`str()`å¯ä»¥çœ‹å‡ºè³‡æ–™ç‰©ä»¶çš„è³‡æ–™ç¨®é¡(data frame)å’Œå®ƒçš„å…§éƒ¨çµæ§‹
```{r}
# Investigate the structure of mtcars with `str()`
str(mtcars)
```

##### Creating a data frame
å°‡å…«å¤§è¡Œæ˜Ÿçš„å±¬æ€§ç´€éŒ„åœ¨`planets_df`é€™ä¸€å€‹è³‡æ–™æ¡†è£¡é¢
```{r,paged.print=FALSE}
# Definition of vectors
name <- c("Mercury", "Venus", "Earth", 
          "Mars", "Jupiter", "Saturn", 
          "Uranus", "Neptune")
type <- c("Terrestrial planet", 
          "Terrestrial planet", 
          "Terrestrial planet", 
          "Terrestrial planet", "Gas giant", 
          "Gas giant", "Gas giant", "Gas giant")
diameter <- c(0.382, 0.949, 1, 0.532, 
              11.209, 9.449, 4.007, 3.883)
rotation <- c(58.64, -243.02, 1, 1.03, 
              0.41, 0.43, -0.72, 0.67)
rings <- c(FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE)

# Create a data frame from the vectors
planets_df <- data.frame(name,type,diameter,rotation,rings)
  
planets_df
```

##### Creating a data frame (2)
```{r}
# Check the structure of planets_df with `str`
str(planets_df)
```

##### Selection of data frame elements
å› ç‚ºè³‡æ–™æ¡†æ˜¯ä¸€å€‹äºŒç¶­çµæ§‹ï¼Œæ‰€ä»¥è¦æŠ½å–ä»–çš„æŸä¸€å€‹éƒ¨åˆ†ä¹Ÿéœ€è¦å…©å€‹ç´¢å¼•(`[,]`)
```{r,paged.print=FALSE}
# ä½ç½®ç´¢å¼• Print out diameter of Mercury (row 1, column 3) with `[1,3]`
planets_df[1,3]
```

```{r,paged.print=FALSE}
# ä½ç½®ç´¢å¼• Print out data for Mars (entire fourth row) with `[4,]`
planets_df[4,]
```

##### Selection of data frame elements (2)
ä½ç½®ç´¢å¼•ã€åç¨±ç´¢å¼•å’Œæ¢ä»¶ç´¢å¼•å¯ä»¥æ··åˆä½¿ç”¨
```{r}
# Select first 5 values of diameter column
planets_df[1:5,"diameter"]
```

##### Only planets with rings
`$`ç¬¦è™Ÿå¯ä»¥ç”¨ä¾†æŠ½å–è³‡æ–™æ¡†çš„æŸä¸€å€‹columnï¼Œæ³¨æ„ä¸€ä¸‹ï¼Œè³‡æ–™æ¡†(data frame)çš„ä¸€å€‹columnå…¶å¯¦æ˜¯ä¸€å€‹å‘é‡(vector)
```{r,paged.print=FALSE}
# Select the rings variable from planets_df
rings_vector <- planets_df$rings
  
# Print out rings_vector
rings_vector
```

##### Only planets with rings (2)
å› ç‚º`rings_vector`æ˜¯ä¸€å€‹é‚è¼¯å‘é‡ï¼Œæˆ‘å€‘å¯ä»¥ç”¨å®ƒç•¶é‚è¼¯ç´¢å¼•
```{r,paged.print=FALSE}
# Adapt the code to select all columns for planets with rings
planets_df[rings_vector, ]
```

##### Only planets with rings but shorter
`subset()`å¯ä»¥ä¾æ¢ä»¶å°è³‡æ–™æ¡†åšç¯©é¸
```{r,paged.print=FALSE}
# Select planets with diameter < 1 with `subset(df, condition)`
subset(planets_df, subset = diameter < 1)
```

```{r,paged.print=FALSE}
planets_df[planets_df$diameter>1, ]
```


##### Sorting
`order()`æœƒä»¥æ•´æ•¸å‘é‡çš„è¡Œå¼å›å‚³å‘é‡ä¸­æ¯å€‹å€¼çš„æ’åº(ç”±å°åˆ°å¤§)
```{r}
# Play around with the `order()` function in the console
order(c(50,10,40,20,30))

# æœ€å°çš„æ˜¯æ’åœ¨ç¬¬2ä½çš„`10`
# ç¬¬äºŒå°çš„æ˜¯æ’åœ¨ç¬¬4ä½çš„`20`
# ...
# æœ€å¤§çš„æ˜¯æ’åœ¨ç¬¬1ä½çš„`50`
```

##### Sorting your data frame
æˆ‘å€‘å¯ä»¥ä¾ç›´å¾‘çš„å¤§å°(å¾å°åˆ°å¤§)å°å…«å¤§è¡Œæ˜Ÿåšä¸€å€‹æ’åºï¼Œå°‡æ¬¡åºå‘é‡æ”¾åœ¨`positions`è£¡é¢
```{r, paged.print=FALSE}
# Use order() to create order index by diameter
positions <- order(planets_df$diameter)
```

ç”¨æ¬¡åºå‘é‡(`positions`)ä½œç´¢å¼•ï¼Œç­‰æ–¼æ˜¯å°è³‡æ–™æ¡†(ä¾`diameter`å¾å°åˆ°å¤§)ä½œæ’åº
```{r, paged.print=FALSE}
# Use positions to sort planets_df with `df[order_index,]`
planets_df[positions,]
```


<br><hr>

### 6. Lists åºåˆ—
<z>åºåˆ—(list)</z>æ˜¯æ¯”è¼ƒè¤‡é›œçš„ä¸€ç¨®è³‡æ–™çµæ§‹ï¼ŒåŸºæœ¬ä¸Šå„ç¨®ä¸åŒçµæ§‹çš„ç‰©ä»¶éƒ½å¯ä»¥ä¾åºæ”¾åœ¨åŒä¸€å€‹åºåˆ—è£¡é¢ï¼Œåœ¨é€™ä¸€å€‹ç« ç¯€æˆ‘å€‘å…ˆç°¡å–®çš„ç¤ºç¯„ä¸€ä¸‹åºåˆ—çš„è£½ä½œå’Œæ“ä½œï¼Œåœ¨å¾ŒçºŒçš„èª²ç¨‹å–®å…ƒä¹‹ä¸­æœƒå†ç”¨å¯¦ä¾‹è¬›è§£ç³»åˆ—çš„æ“ä½œã€‚ 

As opposed to vectors, lists can hold components of different types, just as your to-do lists can contain different categories of tasks. This chapter will teach you how to create, name, and subset these lists.

##### Lists, why would you need them?
Congratulations! At this point in the course you are already familiar with:

+ Vectors (one dimensional array): can hold numeric, character or logical values. The elements in a vector all have the same data type.
+ Matrices (two dimensional array): can hold numeric, character or logical values. The elements in a matrix all have the same data type.
+ Data frames (two-dimensional objects): can hold numeric, character or logical values. Within a column all elements have the same data type, but different columns can be of different data type.
Pretty sweet for an R newbie, right? 

##### Lists, why would you need them? (2)
A list in R is similar to your to-do list at work or school: the different items on that list most likely differ in length, characteristic, and type of activity that has to be done.

A list in R allows you to gather a variety of objects under one name (that is, the name of the list) in an ordered way. These objects can be matrices, vectors, data frames, even other lists, etc. It is not even required that these objects are related to each other in any way.

You could say that a list is some kind super data type: you can store practically any piece of information in it!

##### Creating a list
å°‡å‘é‡(my_vector)ã€çŸ©é™£(my_matrix)å’Œè³‡æ–™æ¡†(my_df)æ”¾åœ¨åŒä¸€å€‹åºåˆ—(my_list)ä¹‹ä¸­
```{r, paged.print=FALSE}
# Vector with numerics from 1 up to 10
my_vector <- 1:10 

# Matrix with numerics from 1 up to 9
my_matrix <- matrix(1:9, ncol = 3)

# First 10 elements of the built-in data frame mtcars
my_df <- mtcars[1:10,]

# Construct list with these different elements:
my_list <- list(my_vector,my_matrix,my_df)

my_list
```
`my_list`è£¡é¢æœ‰ä¸‰å€‹å­ç‰©ä»¶ä½†é€™äº›å­ç‰©ä»¶ä¸¦æ²’æœ‰åç¨±


##### Creating a named list
æˆ‘å€‘å¯ä»¥åœ¨ç”¢ç”Ÿ`my_list`æ™‚,å°æ¯ä¸€å€‹å­ç‰©ä»¶æŒ‡å®šåç¨±
```{r,paged.print=FALSE}
# Adapt list() call to change the components names to `vec`, `mat` and `df` 
my_list <- list(vec=my_vector, mat=my_matrix, df=my_df)

# Print out my_list
my_list
```

ç„¶å¾Œæˆ‘å€‘å°±å¯ä»¥ä¾åç¨±æŠ½å–è©²åºåˆ—ä¹‹ä¸­çš„å­ç‰©ä»¶
```{r}
my_list$mat
```


##### Creating a named list (2)
å°‡ä¸€éƒ¨é›»å½±("The Shining")çš„è³‡æ–™æ”¾åœ¨ä¸€å€‹åºåˆ—(`shining_list`)è£¡é¢
```{r,paged.print=FALSE}
# The variables mov, act and rev are available
mov="The Shining"
act = c("Jack Nicholson","Shelley Duvall","Danny Lloyd",
        "Scatman Crothers","Barry Nelson")
rev = data.frame(
  scores = c(4.5,4.0,5.0),
  sources = c("IMDb1","IMDb2","IMDb3"),
  comments = c(
    "Best Horror Film I Have Ever Seen",
    "A truly brilliant and scary film from Stanley Kubrick",
    "A masterpiece of psychological horror"))

# Finish the code to build shining_list
shining_list <- list(
  moviename = mov,actors=act,reviews=rev)

shining_list
```

##### Selecting elements from a list
```{r}
# Print out the vector representing the actors
shining_list$actors

# Print the second element of the vector representing the actors
shining_list$actors[2]
```

##### Creating a new list for another movie
å°‡å¦ä¸€éƒ¨é›»å½±("The Departed")çš„è³‡æ–™æ”¾åœ¨å¦ä¸€å€‹åºåˆ—(`shining_list`)è£¡é¢
```{r, paged.print=F}
# define the comments and scores vectors
scores <- c(4.6, 5, 4.8, 5, 4.2)
comments <- c("I would watch it again", "Amazing!", "I liked it", 
              "One of the best movies","Fascinating plot")
movie_title = "The Departed"
movie_actors = c( "Leonardo DiCaprio","Matt Damon","Jack Nicholson",
                  "Mark Wahlberg","Vera Farmiga","Martin Sheen")

# Save the average of the scores vector as avg_review
avg_review = mean(scores)

# Combine scores and comments into the reviews_df data frame
reviews_df = data.frame(scores, comments)

# Create a list, called `departed_list`, 
# that contains the `movie_title`, `movie_actors`, 
# reviews data frame as `reviews_df`, 
# and the average review score as `avg_review`, and print it out.
departed_list = list( 
  movie_title, movie_actors, 
  reviews_df, avg_review)

departed_list
```

<br><br><hr>


